<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Estimate Form | Estimator</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Crimson+Pro:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="style-form.css">
</head>
<body>
  <div class="page">
    <nav class="nav">
      <div class="nav__inner" id="topNav">
        <button class="nav__item" data-view="overview">Overview</button>
        <button class="nav__item active" data-view="estimates">Estimates</button>
        <button class="nav__item" data-view="invoices">Invoices</button>
        <button class="nav__item" data-view="clients">Clients</button>
        <button class="nav__item" data-view="items">Items</button>
        <button class="nav__item" data-view="materials">Materials</button>
        <button class="nav__item" data-view="ai">AI</button>
        <button class="nav__item" data-view="notifications" id="notificationsTab">Notifications</button>
        <button class="nav__item" data-view="settings">Settings</button>
      </div>
    </nav>

    <div class="form-container">
      <div class="form-header">
        <div>
          <p class="eyebrow">ESTIMATE</p>
          <h2 id="formTitle">Create estimate</h2>
        </div>
        <button class="btn ghost" id="closeBtn">Close</button>
      </div>

      <form id="docForm" class="estimate-form">
        <!-- Client Information Section -->
        <div class="form-section">
          <h3 class="form-section__title">Client Information</h3>

          <button type="button" class="btn-client-selector" id="openClientSelectorBtn">
            <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M9 10C11.2091 10 13 8.20914 13 6C13 3.79086 11.2091 2 9 2C6.79086 2 5 3.79086 5 6C5 8.20914 6.79086 10 9 10Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M15 16C15 13.2386 12.3137 11 9 11C5.68629 11 3 13.2386 3 16" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span id="selectedClientName">Select saved client</span>
          </button>

          <div class="grid three">
            <div class="form-field">
              <label>Client name</label>
              <input name="clientName" required placeholder="Jane Smith Construction">
            </div>
            <div class="form-field">
              <label>Email</label>
              <input name="clientEmail" type="email" placeholder="client@email.com">
            </div>
            <div class="form-field">
              <label>Phone</label>
              <input name="clientPhone" placeholder="(555) 123-4567">
            </div>
          </div>

          <div class="grid two">
            <div class="form-field">
              <label>Billing address</label>
              <input name="clientBillingAddress" placeholder="Street, City, State, ZIP">
            </div>
            <div class="form-field">
              <label>Service address</label>
              <textarea name="serviceAddress" rows="2" placeholder="Where the work will be performed"></textarea>
            </div>
          </div>

          <button type="button" class="btn small" id="saveAsNewClient">Save as New Client</button>
        </div>

        <!-- Project Details Section -->
        <div class="form-section">
          <h3 class="form-section__title">Project Details</h3>

          <div class="grid three">
            <div class="form-field">
              <label>Project name</label>
              <input name="projectName" placeholder="Kitchen remodel">
            </div>
            <div class="form-field">
              <label>PO number</label>
              <input name="poNumber" placeholder="Auto-generated if blank">
            </div>
            <div class="form-field date-estimate">
              <label>Valid until</label>
              <input name="validUntil" type="date">
            </div>
            <div class="form-field date-invoice" style="display: none;">
              <label>Due date</label>
              <input name="dueDate" type="date">
            </div>
          </div>
        </div>

        <!-- Line Items Section -->
        <div class="form-section">
          <h3 class="form-section__title">Line Items</h3>
          <div id="lineItems" class="line-items-container"></div>
          <button type="button" class="btn-add-item" id="addLineItem">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M8 3V13M3 8H13" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
            Add Line Item
          </button>
        </div>

        <!-- Summary Section -->
        <div class="form-section">
          <div class="estimate-summary">
            <div class="summary-row">
              <span class="summary-label">Subtotal</span>
              <span class="summary-value" id="subtotal">$0.00</span>
            </div>
            <div class="summary-row summary-row--total">
              <span class="summary-label">Total</span>
              <span class="summary-value" id="total">$0.00</span>
            </div>
          </div>
        </div>

        <!-- Notes Section -->
        <div class="form-section">
          <h3 class="form-section__title">Notes</h3>
          <textarea name="notes" rows="4" placeholder="Scope, payment terms, or scheduling notes"></textarea>
        </div>

        <!-- Form Actions -->
        <div class="form-actions">
          <button class="btn primary large" type="submit" id="submitBtn">Save Estimate</button>
          <button class="btn ghost" type="button" id="resetForm">Clear Form</button>
          <span id="formStatus" class="form-status"></span>
        </div>
      </form>
    </div>
  </div>

  <!-- Client Selector Modal -->
  <div class="modal hidden" id="clientSelectorModal">
    <div class="modal__backdrop"></div>
    <div class="modal__content">
      <div class="modal__header">
        <h3>Select client</h3>
        <button class="btn small ghost" id="closeClientSelectorModal">Close</button>
      </div>
      <input id="searchClients" type="text" placeholder="Search clients by name, email, or company" style="width:100%;margin-bottom:16px;padding:12px;border-radius:10px;border:1px solid var(--border);background:rgba(255,255,255,0.03);color:#f8fafc;font-size:14px;">
      <div id="clientSelectorList" class="client-list"></div>
    </div>
  </div>

  <!-- Client Modal -->
  <div class="modal hidden" id="clientModal">
    <div class="modal__backdrop"></div>
    <div class="modal__content">
      <div class="modal__header">
        <h3>Add client</h3>
        <button class="btn small ghost" id="closeClientModal">Close</button>
      </div>
      <form id="clientForm">
        <label>Name<input name="name" required placeholder="Client name"></label>
        <label>Email<input name="email" type="email" placeholder="email@example.com"></label>
        <label>Phone<input name="phone" placeholder="(555) 123-4567"></label>
        <label>Company<input name="company" placeholder="Company"></label>
        <label>Billing address<textarea name="billingAddress" rows="2" placeholder="Street, City, State, ZIP"></textarea></label>
        <label>Notes<textarea name="notes" rows="3" placeholder="Notes"></textarea></label>
        <div class="form__actions">
          <button type="submit" class="btn primary">Save client</button>
          <span id="clientStatus" class="muted"></span>
        </div>
      </form>
    </div>
  </div>

  <!-- Item Picker Modal -->
  <div class="modal hidden" id="itemModal">
    <div class="modal__backdrop"></div>
    <div class="modal__content">
      <div class="modal__header">
        <h3>Select item</h3>
        <button class="btn small ghost" id="closeItemModal">Close</button>
      </div>
      <input id="searchItems" type="text" placeholder="Search items" style="width:100%;margin-bottom:10px;padding:10px;border-radius:10px;border:1px solid var(--border);background:rgba(255,255,255,0.03);color:#f8fafc;">
      <div id="itemsList" class="client-list"></div>
    </div>
  </div>

  <!-- Material Picker Modal -->
  <div class="modal hidden" id="materialModal">
    <div class="modal__backdrop"></div>
    <div class="modal__content">
      <div class="modal__header">
        <h3>Select material</h3>
        <button class="btn small ghost" id="closeMaterialModal">Close</button>
      </div>
      <input id="searchMaterials" type="text" placeholder="Search materials" style="width:100%;margin-bottom:10px;padding:10px;border-radius:10px;border:1px solid var(--border);background:rgba(255,255,255,0.03);color:#f8fafc;">
      <div id="materialsPickerList" class="client-list"></div>
    </div>
  </div>

  <!-- Item Create Modal -->
  <div class="modal hidden" id="itemCreateModal">
    <div class="modal__backdrop"></div>
    <div class="modal__content">
      <div class="modal__header">
        <h3>Add item</h3>
        <button class="btn small ghost" id="closeItemCreateModal">Close</button>
      </div>
      <form id="itemForm">
        <label>Name<input name="name" required placeholder="Item name"></label>
        <label>Description<textarea name="description" rows="2" placeholder="Description"></textarea></label>
        <label>Default qty<input name="defaultQty" type="number" step="1" value="1"></label>
        <label>Default rate<input name="defaultRate" type="number" step="0.01" value="0"></label>
        <label>Default markup %<input name="defaultMarkup" type="number" step="1" value="0"></label>
        <div class="form__actions">
          <button type="submit" class="btn primary">Save item</button>
          <span id="itemStatus" class="muted"></span>
        </div>
      </form>
    </div>
  </div>

  <!-- Material Create Modal -->
  <div class="modal hidden" id="materialCreateModal">
    <div class="modal__backdrop"></div>
    <div class="modal__content">
      <div class="modal__header">
        <h3>Add material</h3>
        <button class="btn small ghost" id="closeMaterialCreateModal">Close</button>
      </div>
      <form id="materialForm">
        <label>Name<input name="name" required placeholder="Material name"></label>
        <label>Description<textarea name="description" rows="2" placeholder="Description"></textarea></label>
        <label>Default qty<input name="defaultQty" type="number" step="1" value="1"></label>
        <label>Default rate<input name="defaultRate" type="number" step="0.01" value="0"></label>
        <label>Default markup %<input name="defaultMarkup" type="number" step="1" value="0"></label>
        <div class="form__actions">
          <button type="submit" class="btn primary">Save material</button>
          <span id="materialStatus" class="muted"></span>
        </div>
      </form>
    </div>
  </div>

  <script src="form.js"></script>
</body>
</html>
