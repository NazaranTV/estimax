<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Estimator | Estimates & Invoices</title>
  <link rel="stylesheet" href="style.css?v=20260114-calendar">
</head>
<body>
  <div class="page">
    <nav class="nav">
      <div class="nav__inner" id="topNav">
        <button class="nav__item active" data-view="overview">Overview</button>
        <button class="nav__item" data-view="calendar">Calendar</button>
        <button class="nav__item" data-view="estimates">Estimates</button>
        <button class="nav__item" data-view="invoices">Invoices</button>
        <button class="nav__item" data-view="clients">Clients</button>
        <button class="nav__item" data-view="items">Items</button>
        <button class="nav__item" data-view="materials">Materials</button>
        <button class="nav__item" data-view="notifications" id="notificationsTab">
          Notifications <span id="notificationsBadge" class="badge hidden">0</span>
        </button>
        <button class="nav__item" data-view="tools">Tools</button>
        <button class="nav__item" data-view="settings">Settings</button>
      </div>
    </nav>

    <section class="workspace card hidden" id="overviewView">
      <div class="summary">
        <div class="summary__card">
          <p>Outstanding</p>
          <span id="outstandingCount">$0</span>
        </div>
        <div class="summary__card">
          <p>Unpaid invoices</p>
          <span id="unpaidCount">$0</span>
        </div>
        <div class="summary__card">
          <p>Drafts</p>
          <span id="draftCount">0</span>
        </div>
        <div class="summary__card">
          <p>Sent this week</p>
          <span id="sentCount">0</span>
        </div>
      </div>
      <div class="pane">
        <div class="card__header">
          <div>
            <p class="eyebrow">Pipeline</p>
            <h3>Saved estimates &amp; invoices</h3>
          </div>
          <div class="filters">
            <button data-filter="all" class="active">All</button>
            <button data-filter="estimate">Estimates</button>
            <button data-filter="invoice">Invoices</button>
          </div>
        </div>
        <div id="list" class="doc-list"></div>
      </div>
    </section>

    <section class="workspace card hidden" id="workspace">
      <!-- Desktop Header -->
      <div class="workspace__header desktop-only">
        <div>
          <p class="eyebrow" id="listEyebrow">Estimates</p>
          <h2 id="listTitle">All estimates</h2>
        </div>
        <button class="btn primary" id="newDocBtn" type="button">Create Estimate</button>
      </div>

      <!-- Mobile Header -->
      <div class="mobile-view-header">
        <div class="mobile-view-header__top">
          <div style="width: 40px;"></div>
          <h1 class="mobile-view-header__title" id="mobileListTitle">Estimates</h1>
          <button class="mobile-view-header__icon-btn" id="mobileNewDocBtn" type="button">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="12" y1="5" x2="12" y2="19"/>
              <line x1="5" y1="12" x2="19" y2="12"/>
            </svg>
          </button>
        </div>
        <div class="mobile-view-header__search">
          <input id="mobileSearchDocs" type="text" placeholder="Search all estimates">
        </div>
        <div class="mobile-view-header__filters" id="mobileStatusFilters">
          <!-- Status filter buttons will be dynamically populated -->
        </div>
      </div>

      <div class="pane">
        <div class="mobile-view-content with-filters"></div>
        <input id="searchDocs" type="text" placeholder="Search by name, client, PO, or project" class="search-input desktop-only" style="margin-bottom: 16px;">
        <div class="pill-nav desktop-only" id="statusFilters">
          <!-- Status filter buttons will be dynamically populated -->
        </div>
        <div id="typeList" class="doc-list"></div>
      </div>
    </section>

    <section class="workspace card hidden" id="placeholder">
      <div class="placeholder">
        <p class="eyebrow" id="placeholderLabel">Coming soon</p>
        <h2 id="placeholderTitle">Clients view</h2>
        <p class="lead muted">This area will show clients, items, or settings when you're ready.</p>
      </div>
    </section>

    <section class="workspace card hidden" id="clientsView">
      <!-- Desktop Header -->
      <div class="workspace__header desktop-only">
        <div>
          <p class="eyebrow">Clients</p>
          <h2>Saved clients</h2>
        </div>
        <button class="btn primary" id="addClientFromClients">Add client</button>
      </div>

      <!-- Mobile Header -->
      <div class="mobile-view-header">
        <div class="mobile-view-header__top">
          <div style="width: 40px;"></div>
          <h1 class="mobile-view-header__title">Clients</h1>
          <button class="mobile-view-header__icon-btn" id="mobileAddClient" type="button">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="12" y1="5" x2="12" y2="19"/>
              <line x1="5" y1="12" x2="19" y2="12"/>
            </svg>
          </button>
        </div>
        <div class="mobile-view-header__search">
          <input id="mobileClientsSearch" type="text" placeholder="Search">
        </div>
      </div>

      <!-- Alphabet Index -->
      <div class="alphabet-index" id="alphabetIndex">
        <!-- Letters will be populated by JavaScript -->
      </div>

      <div class="pane">
        <div class="mobile-view-content"></div>
        <input type="text" id="clientsSearchInput" placeholder="Search clients by name, company, or email..." class="search-input desktop-only">
        <div id="clientsList" class="clients-grid"></div>
      </div>
    </section>

    <section class="workspace card hidden" id="itemsView">
      <!-- Desktop Header -->
      <div class="workspace__header desktop-only">
        <div>
          <p class="eyebrow">Items</p>
          <h2>Saved line items</h2>
        </div>
        <button class="btn primary" id="addItemFromView">Add item</button>
      </div>

      <!-- Mobile Header -->
      <div class="mobile-view-header">
        <div class="mobile-view-header__top">
          <div style="width: 40px;"></div>
          <h1 class="mobile-view-header__title">Items</h1>
          <button class="mobile-view-header__icon-btn" id="mobileAddItem" type="button">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="12" y1="5" x2="12" y2="19"/>
              <line x1="5" y1="12" x2="19" y2="12"/>
            </svg>
          </button>
        </div>
        <div class="mobile-view-header__search">
          <input id="mobileItemsSearch" type="text" placeholder="Search">
        </div>
      </div>

      <div class="pane">
        <div class="mobile-view-content"></div>
        <input type="text" id="itemsSearchInput" placeholder="Search items by name or description..." class="search-input desktop-only">
        <div id="itemsListView" class="items-grid"></div>
      </div>
    </section>

    <section class="workspace card hidden" id="materialsView">
      <!-- Desktop Header -->
      <div class="workspace__header desktop-only">
        <div>
          <p class="eyebrow">Materials</p>
          <h2>Saved materials</h2>
        </div>
        <button class="btn primary" id="addMaterialFromView">Add material</button>
      </div>

      <!-- Mobile Header -->
      <div class="mobile-view-header">
        <div class="mobile-view-header__top">
          <div style="width: 40px;"></div>
          <h1 class="mobile-view-header__title">Materials</h1>
          <button class="mobile-view-header__icon-btn" id="mobileAddMaterial" type="button">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="12" y1="5" x2="12" y2="19"/>
              <line x1="5" y1="12" x2="19" y2="12"/>
            </svg>
          </button>
        </div>
        <div class="mobile-view-header__search">
          <input id="mobileMaterialsSearch" type="text" placeholder="Search">
        </div>
      </div>

      <div class="pane">
        <div class="mobile-view-content"></div>
        <input type="text" id="materialsSearchInput" placeholder="Search materials by name or description..." class="search-input desktop-only">
        <div id="materialsListView" class="materials-grid"></div>
      </div>
    </section>

    <section class="workspace card hidden" id="notificationsView">
      <div class="workspace__header">
        <div>
          <p class="eyebrow">Notifications</p>
          <h2>Activity & Updates</h2>
        </div>
        <div style="display: flex; gap: 8px;">
          <button class="btn ghost" id="markAllReadBtn">Mark all as read</button>
          <button class="btn ghost" id="filterUnreadBtn">Show unread only</button>
        </div>
      </div>
      <div class="pane">
        <div id="notificationsList" class="notifications-list"></div>
      </div>
    </section>

    <section class="workspace card hidden" id="calendarView">
      <div class="pane" style="padding-top: 24px;">
        <div style="display: grid; grid-template-columns: 1fr 300px; gap: 20px;">
          <div id="calendarContainer" class="calendar-container">
            <div id="calendarHeader" class="calendar-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
              <h3 id="calendarTitle" style="margin: 0; font-size: 18px;"></h3>
              <div style="display: flex; gap: 8px; align-items: center;">
                <button class="btn primary" id="addEventBtn">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 4px;">
                    <line x1="12" y1="5" x2="12" y2="19"></line>
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                  </svg>
                  New Event
                </button>
                <button class="btn ghost" id="calendarTodayBtn">Today</button>
                <div style="display: flex; gap: 4px;">
                  <button class="btn ghost small" id="calendarPrevBtn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="15 18 9 12 15 6"></polyline>
                    </svg>
                  </button>
                  <button class="btn ghost small" id="calendarNextBtn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="9 18 15 12 9 6"></polyline>
                    </svg>
                  </button>
                </div>
                <select id="calendarViewMode" class="btn ghost small">
                  <option value="month">Month</option>
                  <option value="week">Week</option>
                  <option value="day">Day</option>
                </select>
              </div>
            </div>
            <div id="calendarGrid" class="calendar-grid"></div>
          </div>
          <div id="appointmentsList" class="appointments-list">
            <h3 style="margin-bottom: 16px;">Upcoming Appointments</h3>
            <div id="appointmentsContent"></div>
          </div>
        </div>
      </div>
    </section>

    <section class="workspace card hidden" id="settingsView">
      <div class="workspace__header">
        <div>
          <p class="eyebrow">Settings</p>
          <h2>Workspace settings</h2>
        </div>
      </div>
      <div class="pane">
        <div class="client-card">
          <div>
            <h4>Display</h4>
            <p class="meta">Customize the appearance of the application</p>
          </div>
          <div class="client-actions">
            <label class="theme-toggle">
              <span>Theme</span>
              <select id="themeSelect">
                <option value="dark">Dark Mode</option>
                <option value="light">Light Mode</option>
              </select>
            </label>
          </div>
        </div>

        <div class="client-card" style="margin-top: 24px;">
          <div>
            <h4>Payment Methods</h4>
            <p class="meta">Configure payment QR codes to display on invoices</p>
          </div>
          <div class="client-actions">
            <button class="btn small" id="addPaymentMethod">Add method</button>
          </div>
        </div>
        <div id="paymentMethodsList" class="pane"></div>

        <div class="client-card" style="margin-top: 24px;">
          <div>
            <h4>Company Information</h4>
            <p class="meta">Configure your company details for estimates and invoices</p>
          </div>
        </div>
        <div class="pane" style="margin-top: 12px;">
          <div style="display: grid; gap: 16px; max-width: 600px;">
            <label style="display: block;">
              <span style="font-weight: 600; margin-bottom: 8px; display: block;">Company Name</span>
              <input type="text" id="companyName" placeholder="Your Company Name" style="width: 100%;">
            </label>

            <label style="display: block;">
              <span style="font-weight: 600; margin-bottom: 8px; display: block;">Address</span>
              <textarea id="companyAddress" placeholder="123 Business Street&#10;City, State 12345" rows="3" style="width: 100%;"></textarea>
            </label>

            <label style="display: block;">
              <span style="font-weight: 600; margin-bottom: 8px; display: block;">Phone</span>
              <input type="text" id="companyPhone" placeholder="(555) 123-4567" style="width: 100%;">
            </label>

            <label style="display: block;">
              <span style="font-weight: 600; margin-bottom: 8px; display: block;">Email</span>
              <input type="email" id="companyEmail" placeholder="info@yourcompany.com" style="width: 100%;">
            </label>

            <label style="display: block;">
              <span style="font-weight: 600; margin-bottom: 8px; display: block;">Company Logo</span>
              <input type="file" id="companyLogo" accept="image/*" style="width: 100%;">
              <p class="meta" style="margin-top: 8px;">Upload your company logo (recommended: 400x400px or square ratio)</p>
            </label>

            <div id="logoPreview" style="margin-top: 8px; display: none;">
              <img id="logoPreviewImage" style="max-width: 200px; max-height: 100px; border: 1px solid var(--border); border-radius: 8px; padding: 8px; background: white;">
            </div>

            <button class="btn" id="saveCompanyInfo" style="margin-top: 12px;">Save Company Information</button>
          </div>
        </div>

        <div class="client-card" style="margin-top: 24px;">
          <div>
            <h4>Account</h4>
            <p class="meta">Manage your account settings</p>
          </div>
          <div class="client-actions">
            <button class="btn small" id="logoutBtn">Logout</button>
          </div>
        </div>
      </div>
    </section>

    <section class="workspace card hidden" id="toolsView">
      <div class="workspace__header">
        <div>
          <p class="eyebrow">Tools</p>
          <h2>Electrical Load Calculator</h2>
        </div>
      </div>
      <div class="pane">
        <div style="max-width: 900px; margin: 0 auto;">
          <div style="margin-bottom: 24px;">
            <p class="meta">Calculate electrical loads based on NEC 2017 Article 220 (Branch-Circuit, Feeder, and Service Load Calculations)</p>
          </div>

          <!-- General Lighting Load -->
          <div class="client-card" style="margin-bottom: 16px;">
            <div style="flex: 1;">
              <h4>General Lighting Load</h4>
              <p class="meta">Based on NEC Table 220.12</p>
              <div class="grid two" style="margin-top: 12px;">
                <label style="display: block;">
                  <span style="font-weight: 600; margin-bottom: 8px; display: block;">Occupancy Type</span>
                  <select id="occupancyType" style="width: 100%;">
                    <option value="3">Dwelling Units (3 VA/sq ft)</option>
                    <option value="2">Hotels/Motels (2 VA/sq ft)</option>
                    <option value="3.5">Hospitals (2 VA/sq ft min)</option>
                    <option value="1">Storage Warehouses (0.25 VA/sq ft)</option>
                    <option value="1.5">Schools (3 VA/sq ft)</option>
                    <option value="3.5">Offices (3.5 VA/sq ft)</option>
                    <option value="1.5">Churches (1 VA/sq ft)</option>
                  </select>
                </label>
                <label style="display: block;">
                  <span style="font-weight: 600; margin-bottom: 8px; display: block;">Square Footage</span>
                  <input type="number" id="squareFootage" placeholder="e.g., 2000" min="0" style="width: 100%;">
                </label>
              </div>
            </div>
          </div>

          <!-- Small Appliance and Laundry Circuits -->
          <div class="client-card" style="margin-bottom: 16px;">
            <div style="flex: 1;">
              <h4>Small Appliance & Laundry Circuits</h4>
              <p class="meta">NEC 220.52 - Minimum 1500 VA per circuit</p>
              <div class="grid two" style="margin-top: 12px;">
                <label style="display: block;">
                  <span style="font-weight: 600; margin-bottom: 8px; display: block;">Small Appliance Circuits (min. 2)</span>
                  <input type="number" id="smallApplianceCircuits" placeholder="e.g., 2" min="0" value="2" style="width: 100%;">
                </label>
                <label style="display: block;">
                  <span style="font-weight: 600; margin-bottom: 8px; display: block;">Laundry Circuits</span>
                  <input type="number" id="laundryCircuits" placeholder="e.g., 1" min="0" value="1" style="width: 100%;">
                </label>
              </div>
            </div>
          </div>

          <!-- Range/Cooking Equipment -->
          <div class="client-card" style="margin-bottom: 16px;">
            <div style="flex: 1;">
              <h4>Range & Cooking Equipment</h4>
              <p class="meta">NEC Table 220.55</p>
              <div class="grid two" style="margin-top: 12px;">
                <label style="display: block;">
                  <span style="font-weight: 600; margin-bottom: 8px; display: block;">Number of Ranges (12 kW or less)</span>
                  <input type="number" id="numRanges" placeholder="e.g., 1" min="0" value="0" style="width: 100%;">
                </label>
                <label style="display: block;">
                  <span style="font-weight: 600; margin-bottom: 8px; display: block;">Cooktop/Oven kW (if separate)</span>
                  <input type="number" id="cooktopKW" placeholder="e.g., 8" min="0" step="0.1" value="0" style="width: 100%;">
                </label>
              </div>
            </div>
          </div>

          <!-- Dryer -->
          <div class="client-card" style="margin-bottom: 16px;">
            <div style="flex: 1;">
              <h4>Dryer Load</h4>
              <p class="meta">NEC 220.54 - Minimum 5000W or nameplate rating</p>
              <div class="grid two" style="margin-top: 12px;">
                <label style="display: block;">
                  <span style="font-weight: 600; margin-bottom: 8px; display: block;">Dryer Wattage</span>
                  <input type="number" id="dryerWatts" placeholder="e.g., 5000" min="0" value="0" style="width: 100%;">
                </label>
              </div>
            </div>
          </div>

          <!-- HVAC -->
          <div class="client-card" style="margin-bottom: 16px;">
            <div style="flex: 1;">
              <h4>Heating & Air Conditioning</h4>
              <p class="meta">NEC 220.60 - Use largest of heating or cooling load</p>
              <div class="grid two" style="margin-top: 12px;">
                <label style="display: block;">
                  <span style="font-weight: 600; margin-bottom: 8px; display: block;">Air Conditioning (Watts)</span>
                  <input type="number" id="acWatts" placeholder="e.g., 3600" min="0" value="0" style="width: 100%;">
                </label>
                <label style="display: block;">
                  <span style="font-weight: 600; margin-bottom: 8px; display: block;">Heating (Watts)</span>
                  <input type="number" id="heatingWatts" placeholder="e.g., 10000" min="0" value="0" style="width: 100%;">
                </label>
              </div>
            </div>
          </div>

          <!-- Additional Loads -->
          <div class="client-card" style="margin-bottom: 16px;">
            <div style="flex: 1;">
              <h4>Additional Fixed Appliances</h4>
              <p class="meta">Water heaters, dishwashers, disposals, etc.</p>
              <div class="grid two" style="margin-top: 12px;">
                <label style="display: block;">
                  <span style="font-weight: 600; margin-bottom: 8px; display: block;">Water Heater (Watts)</span>
                  <input type="number" id="waterHeaterWatts" placeholder="e.g., 4500" min="0" value="0" style="width: 100%;">
                </label>
                <label style="display: block;">
                  <span style="font-weight: 600; margin-bottom: 8px; display: block;">Other Appliances (Watts)</span>
                  <input type="number" id="otherAppliancesWatts" placeholder="e.g., 2000" min="0" value="0" style="width: 100%;">
                </label>
              </div>
            </div>
          </div>

          <!-- Motor Loads -->
          <div class="client-card" style="margin-bottom: 16px;">
            <div style="flex: 1;">
              <h4>Motor Loads</h4>
              <p class="meta">NEC 220.50 - Motors rated at nameplate</p>
              <div class="grid two" style="margin-top: 12px;">
                <label style="display: block;">
                  <span style="font-weight: 600; margin-bottom: 8px; display: block;">Total Motor Load (Watts)</span>
                  <input type="number" id="motorWatts" placeholder="e.g., 1500" min="0" value="0" style="width: 100%;">
                </label>
              </div>
            </div>
          </div>

          <!-- Calculate Button -->
          <div style="margin-top: 24px; text-align: center;">
            <button class="btn primary large" id="calculateLoadBtn" type="button">Calculate Total Load</button>
          </div>

          <!-- Results -->
          <div id="loadResults" style="display: none; margin-top: 32px;">
            <div class="client-card" style="background: rgba(59, 130, 246, 0.1); border-color: rgba(59, 130, 246, 0.3);">
              <div style="flex: 1;">
                <h3 style="margin-bottom: 16px;">Calculated Load Summary</h3>

                <div style="display: grid; gap: 12px; margin-bottom: 16px;">
                  <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid var(--border);">
                    <span>General Lighting Load:</span>
                    <strong id="resultLighting">0 VA</strong>
                  </div>
                  <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid var(--border);">
                    <span>Small Appliance & Laundry:</span>
                    <strong id="resultAppliances">0 VA</strong>
                  </div>
                  <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid var(--border);">
                    <span>Cooking Equipment:</span>
                    <strong id="resultCooking">0 W</strong>
                  </div>
                  <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid var(--border);">
                    <span>Dryer:</span>
                    <strong id="resultDryer">0 W</strong>
                  </div>
                  <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid var(--border);">
                    <span>HVAC (Larger of AC/Heat):</span>
                    <strong id="resultHVAC">0 W</strong>
                  </div>
                  <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid var(--border);">
                    <span>Water Heater & Other:</span>
                    <strong id="resultOther">0 W</strong>
                  </div>
                  <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid var(--border);">
                    <span>Motor Loads:</span>
                    <strong id="resultMotors">0 W</strong>
                  </div>
                </div>

                <div style="margin-top: 24px; padding-top: 16px; border-top: 2px solid var(--border);">
                  <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                    <span style="font-size: 18px; font-weight: 600;">Subtotal (before demand factors):</span>
                    <strong style="font-size: 18px;" id="resultSubtotal">0 W</strong>
                  </div>
                  <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                    <span style="font-size: 18px; font-weight: 600;">Total with Demand Factors:</span>
                    <strong style="font-size: 18px; color: #3b82f6;" id="resultTotal">0 W</strong>
                  </div>
                  <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                    <span style="font-size: 16px;">Amperage @ 240V:</span>
                    <strong style="font-size: 16px;" id="resultAmps">0 A</strong>
                  </div>
                  <div style="display: flex; justify-content: space-between;">
                    <span style="font-size: 16px;">Recommended Service:</span>
                    <strong style="font-size: 16px; color: #10b981;" id="resultService">0 A</strong>
                  </div>
                </div>

                <div style="margin-top: 16px; padding: 12px; background: rgba(255, 255, 255, 0.05); border-radius: 8px;">
                  <p class="meta" style="font-size: 13px; line-height: 1.6;">
                    <strong>Note:</strong> Demand factors applied per NEC 220.42 & 220.82 for dwelling units.
                    First 3000 VA @ 100%, next 117,000 VA @ 35%, remainder @ 25%.
                    Always verify calculations with local code requirements and consider future loads.
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>

  <div class="modal hidden wide" id="contractorModal">
    <div class="modal__backdrop"></div>
    <div class="modal__content">
      <div class="modal__header">
        <h3 id="formTitle">Create estimate</h3>
        <button class="btn small ghost" id="closeContractorModal">Close</button>
      </div>
      <form id="docForm">
        <div class="client-select">
          <div class="client-select__top">
            <label>Client</label>
            <div class="client-actions">
              <button type="button" class="btn small ghost" id="addClientFromForm">Add client</button>
            </div>
          </div>
          <select id="clientPicker">
            <option value="">Select saved client</option>
          </select>
            </div>
            <div class="grid three">
              <label>Client name<input name="clientName" required placeholder="Jane Smith Construction"></label>
              <label>Email<input name="clientEmail" type="email" placeholder="client@email.com"></label>
              <label>Phone<input name="clientPhone" placeholder="(555) 123-4567"></label>
            </div>
            <div class="grid three">
              <label>Email<input name="clientBillingEmail" type="email" placeholder="billing@email.com"></label>
              <label>Billing address<textarea name="clientBillingAddress" rows="2" placeholder="Street, City, State, ZIP"></textarea></label>
              <label>Project Name<input name="projectName" placeholder="Kitchen remodel"></label>
            </div>
            <div class="grid two">
              <label>Service Address<input name="serviceAddress" placeholder="Where the work will be performed"></label>
            </div>
        <div class="grid three">
          <label>PO Number<input name="poNumber" placeholder="Auto-generated if blank"></label>
          <label class="date-estimate">Valid until<input name="validUntil" type="date"></label>
          <label class="date-invoice">Due date<input name="dueDate" type="date"></label>
        </div>

        <div class="line-items">
              <div class="line-items__header">
                <p>Line items</p>
              </div>
              <div id="lineItems"></div>
              <button type="button" class="btn-add-item" id="addLineItem">+ Add Line Item</button>
            </div>

        <div class="totals">
          <div><p>Subtotal</p><strong id="subtotal">$0.00</strong></div>
          <div><p>Total</p><strong id="total">$0.00</strong></div>
        </div>

        <label>Notes<textarea name="notes" rows="3" placeholder="Scope, payment terms, or scheduling notes"></textarea></label>

        <div class="form__actions">
          <button class="btn primary" type="submit" id="submitBtn">Save</button>
          <button class="btn ghost" type="button" id="resetForm">Clear</button>
          <span id="formStatus" class="muted"></span>
        </div>
      </form>
    </div>
  </div>

  <div class="modal hidden wide" id="clientViewModal">
    <div class="modal__backdrop"></div>
    <div class="modal__content">
      <div class="modal__header">
        <h3 id="clientViewTitle">Preview</h3>
        <div class="modal__header-buttons">
          <button class="btn small primary" id="previewInvoiceBtn" style="display: none;">Invoice</button>
          <button class="btn small primary" id="previewPaymentBtn" style="display: none;">Payments</button>
          <button class="btn small" id="previewCopyBtn">Copy</button>
          <button class="btn small" id="previewShareBtn">Share â–¾</button>
          <button class="btn small" id="previewEditBtn">Edit</button>
          <button class="btn small" id="previewDeleteBtn" style="color: var(--error);">Delete</button>
          <button class="btn small ghost" id="closeClientViewModal">Close</button>
        </div>
        <div class="dropdown-container" id="previewShareDropdown">
          <div class="dropdown-menu hidden">
            <a class="dropdown-item" id="previewShareView" href="#" target="_blank" rel="noopener">View</a>
            <button class="dropdown-item" id="previewShareEmail">Email</button>
            <button class="dropdown-item" id="previewShareSMS">SMS</button>
            <a class="dropdown-item" id="previewShareMaterials" href="#" target="_blank" rel="noopener" style="display: none;">Materials List</a>
          </div>
        </div>
      </div>
      <div id="clientViewBody" class="doc-card"></div>
    </div>
  </div>

  <div class="modal hidden" id="sendModal">
    <div class="modal__backdrop"></div>
    <div class="modal__content">
      <div class="modal__header">
        <h3>Send document</h3>
        <button class="btn small ghost" id="closeSendModal">Close</button>
      </div>
      <div class="list-actions" style="flex-direction:column;gap:8px;">
        <button class="btn primary" data-send="email">Email</button>
        <button class="btn primary" data-send="sms">SMS</button>
        <button class="btn primary" data-send="pdf">Save as PDF</button>
        <button class="btn primary" data-send="print">Print</button>
      </div>
      <span id="sendStatus" class="muted"></span>
    </div>
  </div>

  <div class="modal hidden" id="clientModal">
    <div class="modal__backdrop"></div>
    <div class="modal__content">
      <div class="modal__header">
        <h3>Add client</h3>
        <button class="btn small ghost" id="closeClientModal">Close</button>
      </div>
      <div class="modal__body">
        <form id="clientForm" class="modal-form">
          <div class="form-field">
            <label>Name</label>
            <input name="name" required placeholder="Client name">
          </div>

          <div class="grid two">
            <div class="form-field">
              <label>Email</label>
              <input name="email" type="email" placeholder="email@example.com">
            </div>
            <div class="form-field">
              <label>Phone</label>
              <input name="phone" placeholder="(555) 123-4567">
            </div>
          </div>

          <div class="form-field">
            <label>Company</label>
            <input name="company" placeholder="Company">
          </div>

          <div class="form-field">
            <label>Billing address</label>
            <textarea name="billingAddress" rows="3" placeholder="Street, City, State, ZIP"></textarea>
          </div>

          <div class="form-field">
            <label>Notes</label>
            <textarea name="notes" rows="3" placeholder="Notes"></textarea>
          </div>

          <div class="form__actions">
            <button type="submit" class="btn primary">Save client</button>
            <span id="clientStatus" class="muted"></span>
          </div>
        </form>
      </div>
    </div>
  </div>

  <div class="modal hidden" id="itemModal">
    <div class="modal__backdrop"></div>
    <div class="modal__content">
      <div class="modal__header">
        <h3>Select item</h3>
        <button class="btn small ghost" id="closeItemModal">Close</button>
      </div>
      <input id="searchItems" type="text" placeholder="Search items" style="width:100%;margin-bottom:10px;padding:10px;border-radius:10px;border:1px solid var(--border);background:rgba(255,255,255,0.03);color:#f8fafc;">
      <div id="itemsList" class="client-list"></div>
    </div>
  </div>

  <div class="modal hidden" id="materialModal">
    <div class="modal__backdrop"></div>
    <div class="modal__content">
      <div class="modal__header">
        <h3>Select material</h3>
        <button class="btn small ghost" id="closeMaterialModal">Close</button>
      </div>
      <input id="searchMaterials" type="text" placeholder="Search materials" style="width:100%;margin-bottom:10px;padding:10px;border-radius:10px;border:1px solid var(--border);background:rgba(255,255,255,0.03);color:#f8fafc;">
      <div id="materialsPickerList" class="client-list"></div>
    </div>
  </div>

  <div class="modal hidden" id="itemCreateModal">
    <div class="modal__backdrop"></div>
    <div class="modal__content">
      <div class="modal__header">
        <h3>Add item</h3>
        <button class="btn small ghost" id="closeItemCreateModal">Close</button>
      </div>
      <div class="modal__body">
        <form id="itemForm" class="modal-form">
          <div class="form-field">
            <label>Name</label>
            <input name="name" required placeholder="Item name">
          </div>

          <div class="form-field">
            <label>Description</label>
            <textarea name="description" rows="3" placeholder="Description"></textarea>
          </div>

          <div class="form-field autocomplete-wrapper">
            <label>Category</label>
            <input name="category" placeholder="Type or select category (optional)" autocomplete="off">
            <div class="autocomplete-dropdown hidden"></div>
          </div>

          <div class="grid three">
            <div class="form-field">
              <label>Default qty</label>
              <input name="defaultQty" type="number" step="1" value="1">
            </div>
            <div class="form-field">
              <label>Default rate</label>
              <input name="defaultRate" type="number" step="0.01" value="0">
            </div>
            <div class="form-field">
              <label>Default markup %</label>
              <input name="defaultMarkup" type="number" step="1" value="0">
            </div>
          </div>

          <div class="form__actions">
            <button type="submit" class="btn primary">Save item</button>
            <span id="itemStatus" class="muted"></span>
          </div>
        </form>
      </div>
    </div>
  </div>

  <div class="modal hidden" id="materialCreateModal">
    <div class="modal__backdrop"></div>
    <div class="modal__content">
      <div class="modal__header">
        <h3>Add material</h3>
        <button class="btn small ghost" id="closeMaterialCreateModal">Close</button>
      </div>
      <div class="modal__body">
        <form id="materialForm" class="modal-form">
          <div class="form-field">
            <label>Name</label>
            <input name="name" required placeholder="Material name">
          </div>

          <div class="form-field">
            <label>Description</label>
            <textarea name="description" rows="3" placeholder="Description"></textarea>
          </div>

          <div class="form-field autocomplete-wrapper">
            <label>Category</label>
            <input name="category" placeholder="Type or select category (optional)" autocomplete="off">
            <div class="autocomplete-dropdown hidden"></div>
          </div>

          <div class="grid three">
            <div class="form-field">
              <label>Default qty</label>
              <input name="defaultQty" type="number" step="1" value="1">
            </div>
            <div class="form-field">
              <label>Price</label>
              <input name="defaultRate" type="number" step="0.01" value="0">
            </div>
            <div class="form-field">
              <label>Unit rate</label>
              <input name="unitRate" type="number" step="0.01" value="0" readonly style="background: rgba(255, 255, 255, 0.02); cursor: not-allowed;">
            </div>
          </div>

          <div class="form-field">
            <label>Default markup %</label>
            <input name="defaultMarkup" type="number" step="1" value="0">
          </div>

          <div class="form__actions">
            <button type="submit" class="btn primary">Save material</button>
            <span id="materialStatus" class="muted"></span>
          </div>
        </form>
      </div>
    </div>
  </div>

  <div class="modal hidden" id="paymentsModal">
    <div class="modal__backdrop"></div>
    <div class="modal__content" style="max-width: 800px;">
      <div class="modal__header">
        <div>
          <h3>Track Payments</h3>
          <p class="eyebrow" id="paymentsInvoiceInfo">Invoice Details</p>
        </div>
        <button class="btn small ghost" id="closePaymentsModal">Close</button>
      </div>

      <div class="modal__body">
        <!-- Invoice Summary -->
        <div class="payment-summary-card">
          <div class="payment-summary-grid">
            <div class="payment-summary-item">
              <div class="payment-summary-label">Invoice Total</div>
              <div class="payment-summary-value" id="paymentsInvoiceTotal">$0.00</div>
            </div>
            <div class="payment-summary-item paid">
              <div class="payment-summary-label">Total Paid</div>
              <div class="payment-summary-value" id="paymentsTotalPaid">$0.00</div>
            </div>
            <div class="payment-summary-item balance">
              <div class="payment-summary-label">Balance Due</div>
              <div class="payment-summary-value" id="paymentsBalance">$0.00</div>
            </div>
          </div>
          <div class="payment-progress-bar">
            <div class="payment-progress-fill" id="paymentsProgressBar"></div>
          </div>
        </div>

        <!-- Payment Form -->
        <div class="payment-form-section">
          <h4 class="section-title">Record New Payment</h4>
          <form id="paymentsForm">
            <div class="grid two">
              <div class="form-field">
                <label>Amount Type</label>
                <select id="paymentAmountType">
                  <option value="dollars">Dollar Amount</option>
                  <option value="percentage">Percentage</option>
                </select>
              </div>
              <div class="form-field" id="dollarAmountField">
                <label>Amount ($)</label>
                <input type="number" step="0.01" name="dollarAmount" placeholder="0.00" required>
              </div>
              <div class="form-field" id="percentageAmountField" style="display: none;">
                <label>Percentage</label>
                <select name="percentageAmount">
                  <option value="25">25%</option>
                  <option value="50">50%</option>
                  <option value="75">75%</option>
                  <option value="100">Full (100%)</option>
                </select>
              </div>
            </div>
            <div class="grid two">
              <div class="form-field">
                <label>Payment Method</label>
                <select id="paymentMethod" name="paymentMethod">
                  <option value="cash">Cash</option>
                  <option value="check">Check</option>
                  <option value="bank_transfer">Bank Transfer</option>
                  <option value="credit_card">Credit Card</option>
                  <option value="other">Other</option>
                </select>
              </div>
              <div class="form-field">
                <label>Payment Date</label>
                <input type="date" name="paymentDate" required>
              </div>
            </div>
            <div class="form-field" id="checkNumberField" style="display: none;">
              <label>Check Number</label>
              <input type="text" name="checkNumber" placeholder="Check #">
            </div>
            <div class="form-field">
              <label>Notes (Optional)</label>
              <textarea name="paymentNotes" rows="2" placeholder="Add any notes about this payment..."></textarea>
            </div>
            <div class="modal-form__actions">
              <button type="submit" class="btn primary large">Record Payment</button>
              <span id="paymentStatus" class="form-status"></span>
            </div>
          </form>
        </div>

        <!-- Payment History -->
        <div class="payment-history-section">
          <h4 class="section-title">Payment History</h4>
          <div id="paymentsList" class="payments-list"></div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal hidden" id="paymentMethodModal">
    <div class="modal__backdrop"></div>
    <div class="modal__content" style="max-width: 600px;">
      <div class="modal__header">
        <h3 id="paymentMethodModalTitle">Add Payment Method</h3>
        <button class="btn small ghost" id="closePaymentMethodModal">Close</button>
      </div>
      <form id="paymentMethodForm">
        <div class="grid">
          <label>Method Name<input name="methodName" required placeholder="e.g., Cash, Check, Venmo, PayPal, Zelle, etc."></label>
          <label>Payment URL (optional, for QR generation)<input name="paymentUrl" placeholder="https://venmo.com/yourname"></label>
        </div>

        <div style="margin-top: 16px; padding: 16px; background: rgba(255, 255, 255, 0.02); border: 1px solid var(--border); border-radius: 8px;">
          <h4 style="margin-bottom: 8px;">QR Code (Optional)</h4>
          <p style="font-size: 13px; color: var(--muted); margin-bottom: 12px;">For Cash, Check, or other text-only methods, leave this blank.</p>
          <div style="display: flex; gap: 12px; margin-bottom: 12px;">
            <button type="button" class="btn small" id="generateQrBtn">Generate from URL</button>
            <button type="button" class="btn small ghost" id="uploadQrBtn">Upload Image</button>
            <input type="file" id="qrImageUpload" accept="image/*" style="display: none;">
          </div>
          <div id="qrPreview" style="display: none; text-align: center;">
            <img id="qrPreviewImg" style="max-width: 200px; max-height: 200px; border: 1px solid var(--border); border-radius: 8px; background: white; padding: 8px;">
          </div>
          <input type="hidden" name="qrCodeUrl" id="qrCodeUrlHidden">
        </div>

        <div style="display: flex; gap: 8px; justify-content: flex-end; margin-top: 16px;">
          <button type="button" class="btn ghost" id="cancelPaymentMethodBtn">Cancel</button>
          <button type="submit" class="btn primary">Save</button>
        </div>
      </form>
    </div>
  </div>

  <div class="modal hidden" id="deleteConfirmModal">
    <div class="modal__backdrop"></div>
    <div class="modal__content" style="max-width: 400px;">
      <div class="modal__header">
        <h3>Confirm Delete</h3>
      </div>
      <div style="margin: 20px 0;">
        <p id="deleteConfirmText" style="color: var(--muted); line-height: 1.6;">Are you sure you want to delete this document? This action cannot be undone.</p>
      </div>
      <div style="display: flex; gap: 8px; justify-content: flex-end;">
        <button class="btn ghost" id="cancelDelete">Cancel</button>
        <button class="btn primary" id="confirmDelete" style="background: #ef4444; border-color: #ef4444;">Delete</button>
      </div>
    </div>
  </div>

  <!-- Event Creation/Edit Modal -->
  <div class="modal hidden wide" id="eventModal">
    <div class="modal__backdrop"></div>
    <div class="modal__content">
      <div class="modal__header">
        <h3 id="eventModalTitle">Create Event</h3>
        <button class="btn small ghost" id="closeEventModal">Close</button>
      </div>
      <form id="eventForm">
        <div class="grid two">
          <label>Event Type
            <select id="eventType" name="eventType" required>
              <option value="appointment">Appointment</option>
              <option value="holiday">Holiday</option>
              <option value="task">Task</option>
              <option value="reminder">Reminder</option>
              <option value="personal">Personal</option>
            </select>
          </label>
          <label>Link to Estimate/Invoice
            <input type="text" id="eventDocumentSearch" list="eventDocumentList" placeholder="Search or select..." autocomplete="off">
            <datalist id="eventDocumentList"></datalist>
            <input type="hidden" id="eventDocumentId" name="documentId">
          </label>
        </div>

        <label>Title
          <input type="text" id="eventTitle" name="title" placeholder="Event title" required>
        </label>

        <label>Description
          <textarea id="eventDescription" name="description" rows="3" placeholder="Event description"></textarea>
        </label>

        <div class="grid two">
          <label>Date
            <input type="date" id="eventDate" name="appointmentDate" required>
          </label>
          <label style="display: flex; align-items: center; gap: 8px;">
            <input type="checkbox" id="eventAllDay" name="allDay" style="width: auto; margin: 0;">
            <span>All Day Event</span>
          </label>
        </div>

        <div class="grid three" id="eventTimeFields">
          <label>Start Time
            <input type="time" id="eventStartTime" name="appointmentTime">
          </label>
          <label>End Time
            <input type="time" id="eventEndTime" name="endTime">
          </label>
          <label>Duration (hours)
            <input type="number" id="eventDuration" name="durationHours" min="0" step="0.5" value="2" placeholder="2.0">
          </label>
        </div>

        <label>Location
          <input type="text" id="eventLocation" name="location" placeholder="Event location">
        </label>

        <div id="appointmentFields" style="display: none;">
          <h4 style="margin: 24px 0 12px 0; font-size: 14px; color: var(--text-secondary);">Appointment Details</h4>
          <div class="client-select">
            <div class="client-select__top">
              <label>Client</label>
              <div class="client-actions">
                <button type="button" class="btn small ghost" id="addClientFromEvent">Add client</button>
              </div>
            </div>
            <select id="eventClientPicker">
              <option value="">Select saved client or enter manually below</option>
            </select>
          </div>
          <div class="grid three">
            <label>Client Name
              <input type="text" id="eventClientName" name="clientName" placeholder="Client name">
            </label>
            <label>Client Email
              <input type="email" id="eventClientEmail" name="clientEmail" placeholder="client@email.com">
            </label>
            <label>Client Phone
              <input type="tel" id="eventClientPhone" name="clientPhone" placeholder="(555) 123-4567">
            </label>
          </div>
          <label>Status
            <select id="eventStatus" name="status">
              <option value="scheduled">Scheduled</option>
              <option value="completed">Completed</option>
              <option value="cancelled">Cancelled</option>
              <option value="rescheduled">Rescheduled</option>
            </select>
          </label>
        </div>

        <label>Notes
          <textarea id="eventNotes" name="notes" rows="2" placeholder="Additional notes"></textarea>
        </label>

        <div class="form__actions">
          <button class="btn primary" type="submit" id="submitEventBtn">Save Event</button>
          <button class="btn ghost" type="button" id="deleteEventBtn" style="display: none; color: var(--error);">Delete Event</button>
          <button class="btn ghost" type="button" id="cancelEventBtn">Cancel</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Day View Modal -->
  <div class="modal hidden wide" id="dayViewModal">
    <div class="modal__backdrop"></div>
    <div class="modal__content">
      <div class="modal__header">
        <h3 id="dayViewModalTitle">Events for Day</h3>
        <div style="display: flex; gap: 8px;">
          <button class="btn small primary" id="addEventFromDayView">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 4px;">
              <line x1="12" y1="5" x2="12" y2="19"></line>
              <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
            New Event
          </button>
          <button class="btn small ghost" id="closeDayViewModal">Close</button>
        </div>
      </div>
      <div id="dayViewModalContent" class="calendar-day-view" style="padding: 20px; max-height: 600px; overflow-y: auto;">
        <!-- Events will be rendered here -->
      </div>
    </div>
  </div>

  <!-- Mobile Bottom Navigation -->
  <nav class="mobile-nav" id="mobileNav">
    <button class="mobile-nav__item" data-view="estimates">
      <svg class="mobile-nav__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <rect x="4" y="2" width="16" height="20" rx="2"/>
        <line x1="8" y1="6" x2="16" y2="6"/>
        <line x1="8" y1="10" x2="16" y2="10"/>
        <line x1="8" y1="14" x2="12" y2="14"/>
      </svg>
      <span class="mobile-nav__label">Estimates</span>
    </button>
    <button class="mobile-nav__item" data-view="invoices">
      <svg class="mobile-nav__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
        <polyline points="14 2 14 8 20 8"/>
        <line x1="16" y1="13" x2="8" y2="13"/>
        <line x1="16" y1="17" x2="8" y2="17"/>
      </svg>
      <span class="mobile-nav__label">Invoices</span>
    </button>
    <button class="mobile-nav__item" data-view="clients">
      <svg class="mobile-nav__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
        <circle cx="9" cy="7" r="4"/>
        <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
        <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
      </svg>
      <span class="mobile-nav__label">Clients</span>
    </button>
    <button class="mobile-nav__item active" data-view="calendar">
      <svg class="mobile-nav__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
        <line x1="16" y1="2" x2="16" y2="6"/>
        <line x1="8" y1="2" x2="8" y2="6"/>
        <line x1="3" y1="10" x2="21" y2="10"/>
      </svg>
      <span class="mobile-nav__label">Calendar</span>
    </button>
    <button class="mobile-nav__item mobile-nav__more" id="mobileMoreBtn">
      <svg class="mobile-nav__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="1"/>
        <circle cx="19" cy="12" r="1"/>
        <circle cx="5" cy="12" r="1"/>
      </svg>
      <span class="mobile-nav__label">More</span>
    </button>
    <!-- More Menu Dropdown -->
    <div class="mobile-nav__menu hidden" id="mobileMoreMenu">
      <button class="mobile-nav__menu-item" data-view="overview">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="3" width="7" height="7"/>
          <rect x="14" y="3" width="7" height="7"/>
          <rect x="14" y="14" width="7" height="7"/>
          <rect x="3" y="14" width="7" height="7"/>
        </svg>
        Overview
      </button>
      <button class="mobile-nav__menu-item" data-view="items">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="8" y1="6" x2="21" y2="6"/>
          <line x1="8" y1="12" x2="21" y2="12"/>
          <line x1="8" y1="18" x2="21" y2="18"/>
          <line x1="3" y1="6" x2="3.01" y2="6"/>
          <line x1="3" y1="12" x2="3.01" y2="12"/>
          <line x1="3" y1="18" x2="3.01" y2="18"/>
        </svg>
        Items
      </button>
      <button class="mobile-nav__menu-item" data-view="materials">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
          <polyline points="3.27 6.96 12 12.01 20.73 6.96"/>
          <line x1="12" y1="22.08" x2="12" y2="12"/>
        </svg>
        Materials
      </button>
      <button class="mobile-nav__menu-item" data-view="tools">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/>
        </svg>
        Tools
      </button>
      <button class="mobile-nav__menu-item" data-view="notifications">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/>
          <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
        </svg>
        Notifications
        <span id="mobileNotificationsBadge" class="mobile-nav__badge hidden">0</span>
      </button>
      <button class="mobile-nav__menu-item" data-view="settings">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="3"/>
          <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
        </svg>
        Settings
      </button>
    </div>
  </nav>

  <!-- Debug console hidden in production -->
  <div class="debug-pane collapsed hidden" id="debugPane" style="display: none;">
    <div class="debug-header">
      <span>Debug console</span>
      <button class="btn small ghost" type="button" id="toggleDebug">Show</button>
    </div>
    <pre id="debugLog"></pre>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <script src="app.js?v=20260114-mobile-nav"></script>
</body>
</html>
